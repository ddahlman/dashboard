"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}mdc.autoInit(),google.charts.load("current",{packages:["corechart","geochart"],mapsApiKey:"AIzaSyDMPDZMkd7YLnBpiKeBAq2HZYfjdWS8FA4"}),google.charts.setOnLoadCallback(function(){addFirstCharts()});var g={container2:document.getElementById("container-2"),toolbar:document.querySelector(".dashboard-toolbar"),pseudoCircle:document.querySelector(".pseudo-circle"),menu1:document.querySelector(".menu-1"),box:document.querySelector(".box"),removeBox:document.querySelector(".close"),wrap:function(){var t=document.getElementById("grid");return window.matchMedia("screen and (min-width: 1200px)").matches&&(t.style.width="1400px"),window.matchMedia("screen and (min-width: 400px) and (max-width: 1200px)").matches&&(t.style.width="700px"),window.matchMedia("screen and (max-width: 400px)").matches&&(t.style.width="300px"),t},firstLoader:document.querySelector(".loading-absolute"),overlay:document.querySelector(".overlay"),slotObjects:[],reports:{},dataId:[],allCharts:[],chartPositions:[],slotsPerRow:function(){return window.matchMedia("screen and (min-width: 1200px)").matches?10:window.matchMedia("screen and (min-width: 400px) and (max-width: 1200px)").matches?5:window.matchMedia("screen and (max-width: 400px)").matches?1:void 0},allSlots:[],arrangedItems:[],staticChartAttributes:[],mini:window.matchMedia("screen and (max-width: 400px)"),medium:window.matchMedia("screen and (min-width: 400px) and (max-width: 1200px)"),large:window.matchMedia("screen and (min-width: 1200px)"),msMediaMedium:"screen and (max-width:1200px) and (min-width:400px)",mozMediaMedium:"screen and (min-width: 400px) and (max-width: 1200px)",chromeMediaMedium:"screen and (max-width: 1200px) and (min-width: 400px)",selected:null,originalIndex:null,originalClickCoords:null,lastTouched:null,aspectWidth:1920,aspectHeight:1080},dynamicTabBar=new mdc.tabs.MDCTabBar(document.querySelector("#icon-text-tab-bar")),fixed_ripple=[].concat(_toConsumableArray(document.getElementsByClassName("mdc-tab"))).map(function(t){return mdc.ripple.MDCRipple.attachTo(t)}),panels=document.querySelector(".panels");function updatePanel(t){var e=panels.querySelector(".panel.is-active");e&&e.classList.remove("is-active");var a=panels.querySelector(".panel:nth-child("+(t+1)+")");a&&a.classList.add("is-active")}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}dynamicTabBar.preventDefaultOnClick=!0,dynamicTabBar.listen("MDCTabBar:change",function(t){updatePanel(t.detail.activeTabIndex)}),function(){var t=0,e=0,a=document.querySelector(".loading h1"),r=document.querySelector(".loading hr"),s=setInterval(function(){a.innerHTML=e+"%",r.style.width=e+"%",e++,101===++t&&(clearInterval(s),g.firstLoader.classList.add("loaded"),[g.box,g.container2,g.toolbar].map(function(t){return t.classList.remove("hidden")}))},10)}(),setTimeout(function(){g.firstLoader.style.display="none"},3e3);var slot=function(t){var e={num:t,aspectWidth:1920,aspectHeight:1080};return Object.assign({},createSlotDiv(e),createDivArray(e))},round=function(t,e){var a=Math.pow(10,e||0);return Math.round(t*a)/a},createSlotDiv=function(t){return{createDiv:function(e){var a=document.createElement("div"),r=t.aspectHeight/t.aspectWidth;a.setAttribute("style","width: "+100/g.slotsPerRow()+"%; padding-bottom: "+100/g.slotsPerRow()*round(r,1)+"%;"),a.setAttribute("class","dd-slot");var s={xPos:Math.floor(e/g.slotsPerRow())+1,yPos:e%g.slotsPerRow()+1,status:"available"};return g.slotObjects.push(s),a.setAttribute("data-slot-x",g.slotObjects[e].xPos),a.setAttribute("data-slot-y",g.slotObjects[e].yPos),a.setAttribute("data-status",g.slotObjects[e].status),a}}},createDivArray=function(t){return{createArray:function(){return[].concat(_toConsumableArray(Array(t.num))).map(function(t,e){return slot().createDiv(e)})}}};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var slotBounds=function(t){var e={wrapBounds:g.wrap().getBoundingClientRect(),slotSize:document.getElementsByClassName("dd-slot")[0].getBoundingClientRect(),num:t};return Object.assign({},slotWidth(e),slotHeight(e),addToSlotObjects(e))},slotWidth=function(t){return{width:function(){switch(t.num){case 1:return t.slotSize.width;case 2:return 2*t.slotSize.width;case 3:return 3*t.slotSize.width;case 4:return 4*t.slotSize.width}}}},slotHeight=function(t){return{height:function(){switch(t.num){case 1:return t.slotSize.height;case 2:return 2*t.slotSize.height;case 3:return 3*t.slotSize.height;case 4:return 4*t.slotSize.height}}}},addToSlotObjects=function(t){return{add:function(){return[].concat(_toConsumableArray(document.getElementsByClassName("dd-slot"))).forEach(function(e,a){var r=e.getBoundingClientRect();Object.assign(g.slotObjects[a],{y:r.top-t.wrapBounds.top,x:r.left-t.wrapBounds.left,bottom:r.bottom-t.wrapBounds.bottom,right:r.right-t.wrapBounds.right,width:r.width,height:r.height})})}}},addSlotsToDOM=function(t){var e=t;return{go:function(){e.forEach(function(t,e){g.wrap().appendChild(t)}),slotBounds().add()}}},pieFunction=function(t,e){var a={obj:t,chart:e};return{go:function(){a.obj.options.pieStartAngle=0,google.visualization.events.addListener(a.chart,"ready",function(){a.obj.options.pieStartAngle<10&&(a.obj.options.pieStartAngle++,setTimeout(function(){a.chart.draw(a.obj.data,a.obj.options)},0))}),a.chart.draw(a.obj.data,a.obj.options)}}},chart=function(t,e,a,r){var s={response:t,optionType:e,type:a,div:r};return{getChart:function(){var t={};t.data=new google.visualization.DataTable(s.response.data),t.options=s.response.options[s.optionType];var e=new google.visualization[s.type](s.div);switch(s.type){case"PieChart":t.draw=function(){return pieFunction(t,e).go()};break;default:t.draw=function(){return e.draw(t.data,t.options)}}return t}}},chartDiv=function(t){var e={cssClass:t,width1:slotBounds(1).width(),width2:slotBounds(2).width(),width3:slotBounds(3).width(),width4:slotBounds(4).width(),height1:slotBounds(1).height(),height2:slotBounds(2).height(),height3:slotBounds(3).height(),height4:slotBounds(4).height()};return{createDiv:function(){var a=document.createElement("div");if(g.large.matches)switch(t){case"area":a.setAttribute("style","width:"+e.width3+"px; height:"+e.height3+"px;");break;case"geo":a.setAttribute("style","width:"+e.width4+"px; height:"+e.height4+"px;");break;case"pie":a.setAttribute("style","width:"+e.width3+"px; height:"+e.height4+"px;");break;case"line":a.setAttribute("style","width:"+e.width3+"px; height:"+e.height3+"px;");break;case"bar":a.setAttribute("style","width:"+e.width4+"px; height:"+e.height4+"px;")}if(g.medium.matches)switch(t){case"area":a.setAttribute("style","width:"+e.width2+"px; height:"+e.height2+"px;");break;case"geo":a.setAttribute("style","width:"+e.width3+"px; height:"+e.height3+"px;");break;case"pie":a.setAttribute("style","width:"+e.width2+"px; height:"+e.height3+"px;");break;case"line":a.setAttribute("style","width:"+e.width2+"px; height:"+e.height2+"px;");break;case"bar":a.setAttribute("style","width:"+e.width3+"px; height:"+e.height3+"px;")}return g.mini.matches&&a.setAttribute("style","width:"+e.width1+"px; height:"+e.height1+"px;"),a.classList.add(e.cssClass),a}}},chartSize=function(t){var e=t;return{getSize:function(){var t=e.style.width,a=e.style.height;return{elWidth:Math.round(t.substring(0,t.length-2)),elHeight:Number(a.substring(0,a.length-2))}}}},getSlotElem=function(t,e){return document.querySelector('[data-slot-x="'+t+'"][data-slot-y="'+e+'"]')},getGridPositions=function(t,e){var a=t,r=e,s=[];return{go:function(){var t=g.slotObjects[a],e=chartSize(r).getSize(),i=e.elWidth,o=e.elHeight,n=[Math.round(t.width),t.height],c=n[0],l=n[1];if(g.mini.matches&&i===c&&o===l){t.status="occupied",getSlotElem(t.xPos,t.yPos).dataset.status="occupied"}else{var d=[t,g.slotObjects[a+1],g.slotObjects[a+g.slotsPerRow()],g.slotObjects[a+1+g.slotsPerRow()]],h=[g.slotObjects[a+2],g.slotObjects[a+2+g.slotsPerRow()],g.slotObjects[a+2*g.slotsPerRow()],g.slotObjects[a+2*g.slotsPerRow()+1],g.slotObjects[a+2*g.slotsPerRow()+2]].concat(d),u=[].concat(h),p=[g.slotObjects[a+3],g.slotObjects[a+3+g.slotsPerRow()],g.slotObjects[a+3*g.slotsPerRow()],g.slotObjects[a+3*g.slotsPerRow()+1],g.slotObjects[a+3*g.slotsPerRow()+2],g.slotObjects[a+2*g.slotsPerRow()+3],g.slotObjects[a+3*g.slotsPerRow()+3]].concat(h),m=[g.slotObjects[a+2*g.slotsPerRow()],g.slotObjects[a+2*g.slotsPerRow()+1]].concat(d),b=[g.slotObjects[a+3*g.slotsPerRow()],g.slotObjects[a+3*g.slotsPerRow()+1],g.slotObjects[a+3*g.slotsPerRow()+2]].concat(h),y=function(t,e,a){return t&&i===c*e&&o===l*a},f=function(t){var e=getSlotElem(t.xPos,t.yPos);return t.status="occupied",e.dataset.status="occupied",{xPos:t.xPos,yPos:t.yPos}};switch(!0){case y(g.medium.matches,2,2):s=d.map(f);break;case y(g.medium.matches,3,3):s=u.map(f);break;case y(g.medium.matches,2,3):s=m.map(f);break;case y(g.large.matches,3,3):s=h.map(f);break;case y(g.large.matches,4,4):s=p.map(f);break;case y(g.large.matches,3,4):s=b.map(f)}}return{x:t.x,y:t.y,width:i,height:o,slot:s}}}},isNotOverlapping=function(t,e,a){var r={indx:t,width:e,height:a,width1:round(slotBounds(1).width(),1),width2:round(slotBounds(2).width(),1),width3:round(slotBounds(3).width(),1),width4:round(slotBounds(4).width(),1),height1:slotBounds(1).height(),height2:slotBounds(2).height(),height3:slotBounds(3).height(),height4:slotBounds(4).height(),yPos:g.slotObjects[t].yPos,X:g.slotObjects[t].status,X1:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+1].status:""},X2:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+2].status:""},X3:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+3].status:""},Y1:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+g.slotsPerRow()].status:""},Y2:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+2*g.slotsPerRow()].status:""},Y3:function(){return g.medium.matches||g.large.matches?g.slotObjects[t+3*g.slotsPerRow()].status:""}};return{check:function(){var t=function(t,e,a){return r.width===t&&r.height===e&&a};switch(!0){case t(r.width1,r.height1,g.mini.matches):return"available"===r.X;case t(r.width2,r.height2,g.medium.matches):return r.yPos<5&&[r.X,r.X1(),r.Y1(),r.Y2()].every(function(t){return"available"===t});case t(r.width3,r.height3,g.medium.matches):return r.yPos<4&&[r.X,r.X1(),r.X2(),r.Y1(),r.Y2()].every(function(t){return"available"===t});case t(r.width2,r.height3,g.medium.matches):return r.yPos<5&&[r.X,r.X1(),r.Y1(),r.Y2()].every(function(t){return"available"===t});case t(r.width3,r.height3,g.large.matches):return r.yPos<9&&[r.X,r.X1(),r.X2(),r.Y1(),r.Y2()].every(function(t){return"available"===t});case t(r.width3,r.height4,g.large.matches):return r.yPos<9&&[r.X,r.X1(),r.X2(),r.Y1(),r.Y2(),r.Y3()].every(function(t){return"available"===t});case t(r.width4,r.height4,g.large.matches):return r.yPos<8&&[r.X,r.X1(),r.X2(),r.X3(),r.Y1(),r.Y2(),r.Y3()].every(function(t){return"available"===t})}}}},addAttributesToChart=function(t,e,a){t.classList.add("dd-item","dd-transition"),t.style.transform="translate3d("+e.x+"px, "+e.y+"px,0px)",g.wrap().appendChild(t),t.addEventListener("mousedown",chartMouseDown),t.addEventListener("mouseup",chartMouseUp),a.draw(),setTimeout(function(){var e=t.appendChild(document.createElement("i"));e.innerHTML="close",e.className+="close-container md-36 material-icons",e.addEventListener("click",removeChart)},50)},placeCharts=function(t){var e=t.div,a=t.chart,r=t.type,s=t.report,i=t.indx,o=t.increment,n=t.width,c=t.height;return{go:function(){var t=getGridPositions(i,e).go();addAttributesToChart(e,t,a),e.setAttribute("data-id",o);var l={ordernumber:o,report:s,charttype:r,cssclass:r.substring(0,r.length-5).toLowerCase(),x:t.x,y:t.y,slotpositions:t.slot},d=new XMLHttpRequest;d.open("POST","api/?/charts"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a=JSON.parse(d.responseText);e.setAttribute("data-chartid",a.id),g.staticChartAttributes[o-1]={report:a.report,charttype:a.charttype,cssclass:a.cssclass},g.chartPositions[o-1]={id:a.id,dataId:o,report:a.report,charttype:a.charttype,cssclass:a.cssclass,width:n,height:c,x:t.x,y:t.y,slotpositions:t.slot}}},d.send(JSON.stringify(l)),g.allCharts.push(a),g.dataId.push(o)}}},cssClassToChartType=function(t){return t.charAt(0).toUpperCase()+t.slice(1)+"Chart"},addChartToDOM=function(t){var e={chartType:t,wrap:g.wrap(),div:chartDiv(t.id).createDiv(),len:g.dataId.length,selectedReportId:document.querySelector("[data-selected]")};return{go:function(){var t=void 0,a=void 0;if(e.selectedReportId&&(t=e.selectedReportId.id,e.selectedReportId.removeAttribute("data-selected")),e.chartType&&(a=e.chartType.id),t){var r={};switch(a){case"area":r=chart(g.reports[t],"regular","AreaChart",e.div).getChart();break;case"geo":r=chart(g.reports[t],"regular","GeoChart",e.div).getChart();break;case"pie":r=chart(g.reports[t],"pie","PieChart",e.div).getChart();break;case"line":r=chart(g.reports[t],"regular","LineChart",e.div).getChart();break;case"bar":r=chart(g.reports[t],"regular","BarChart",e.div).getChart();break;default:r="There are no charts here"}var s=chartSize(e.div).getSize(),i=s.elWidth,o=s.elHeight,n=availableIndex(i,o).get(),c={div:e.div,chart:r,type:cssClassToChartType(a),report:t,indx:n,increment:e.len+1,width:i,height:o};placeCharts(c).go()}}}},putRequest=function(t,e){var a=new XMLHttpRequest;a.open("PUT",t),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status)JSON.parse(a.responseText)},a.send(JSON.stringify(e))},availableIndex=function(t,e){var a=t,r=e;return{get:function(){return g.allSlots.findIndex(function(t,e){return isNotOverlapping(e,a,r).check()?e:""})}}},arrangeItems=function(){var t={dataId:g.dataId,chartPos:g.chartPositions};return{go:function(){return t.dataId.forEach(function(e,a){var r=t.chartPos[a];document.querySelector('[data-id="'+e+'"]').style.transform="translate3d("+r.x+"px, "+r.y+"px, 0px)"})}}},arrangeItemsMouseUp=function(){var t={increment:0,allSlots:g.allSlots,slotObjects:g.slotObjects,chartPos:g.chartPositions,dataId:g.dataId,arrangedItems:g.arrangedItems};return{go:function(){return t.allSlots.map(function(e,a){if("occupied"!==t.slotObjects[a].status&&(t.increment++,void 0!==t.dataId[t.increment-1])){var r=t.dataId[t.increment-1],s=document.querySelector('[data-id="'+r+'"]'),i=chartSize(s).getSize(),o=i.elWidth,n=i.elHeight,c=void 0,l=g.chartPositions[t.increment-1].id;if(isNotOverlapping(a,o,n).check())c=getGridPositions(a,s).go(),s.style.transform="translate3d("+c.x+"px, "+c.y+"px,0px)",t.chartPos[t.increment-1]={id:l,dataId:Number(r),report:g.staticChartAttributes[t.increment-1].report,charttype:g.staticChartAttributes[t.increment-1].charttype,cssclass:g.staticChartAttributes[t.increment-1].cssclass,width:c.width,height:c.height,x:c.x,y:c.y,slotpositions:c.slot},putRequest("api/?/charts",{id:l,ordernumber:r,report:g.staticChartAttributes[t.increment-1].report,charttype:g.staticChartAttributes[t.increment-1].charttype,cssclass:g.staticChartAttributes[t.increment-1].cssclass,x:c.x,y:c.y,slotpositions:c.slot});else{var d=availableIndex(o,n).get();c=getGridPositions(d,s).go(),s.style.transform="translate3d("+c.x+"px, "+c.y+"px,0px)",t.chartPos[t.increment-1]={id:l,dataId:Number(r),report:g.staticChartAttributes[t.increment-1].report,charttype:g.staticChartAttributes[t.increment-1].charttype,cssclass:g.staticChartAttributes[t.increment-1].cssclass,width:c.width,height:c.height,x:c.x,y:c.y,slotpositions:c.slot},putRequest("api/?/charts",{id:l,ordernumber:r,report:g.staticChartAttributes[t.increment-1].report,charttype:g.staticChartAttributes[t.increment-1].charttype,cssclass:g.staticChartAttributes[t.increment-1].cssclass,x:c.x,y:c.y,slotpositions:c.slot})}console.log({id:g.chartPositions[t.increment-1].id,ordernumber:r,report:g.staticChartAttributes[t.increment-1].report,charttype:g.staticChartAttributes[t.increment-1].charttype,cssclass:g.staticChartAttributes[t.increment-1].cssclass,x:c.x,y:c.y,slotpositions:c.slot})}})}}},getChartIdByCoords=function(t){var e=g.chartPositions;return{go:function(){for(var a in e){var r=e[a];if(r.x<=t.x&&t.x<=r.x+r.width&&r.y<=t.y&&t.y<=r.y+r.height)return a}}}},getSlotIdByCoords=function(t){var e=g.slotObjects;return{go:function(){for(var a in e){var r=e[a];if(r.x<=t.x&&t.x<=r.x+r.width&&r.y<=t.y&&t.y<=r.y+r.height)return a}}}},getIndexOfChartId=function(t){var e=g.dataId.length;return{go:function(){for(var a=0;a<e;a++)if(g.dataId[a]===Number(t))return a}}},removeMenu=function(){g.box.classList.remove("open"),g.pseudoCircle.classList.remove("open"),g.menu1.classList.remove("show"),g.toolbar.classList.remove("open")};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var availableCharts=function(t){var e=t;return{show:function(){[].concat(_toConsumableArray(document.querySelectorAll(".card2"))).filter(function(t){var a=t.getAttribute("id");return e.some(function(t){return a===t})}).map(function(t,e){return t.style.display="block",t.classList.add("c"+(e+1)),t})}}},showAvailableCharts=function(t){var e=t;return{go:function(){switch([].concat(_toConsumableArray(document.querySelectorAll(".card2"))).map(function(t){return t.style.display="none"}),e){case"sale":availableCharts(["bar","line","area","pie"]).show();break;case"expenditure":availableCharts(["bar","line","area","geo"]).show();break;case"nrOfVisitors":availableCharts(["bar","line","pie","geo"]).show();break;case"socialMedia":availableCharts(["bar","area","pie","geo"]).show();break;case"compiledInfo":availableCharts(["line","area","pie","geo"]).show();break;case"nationalities":case"todaysEvent":availableCharts(["bar","line","area","geo"]).show();break;case"bookings":availableCharts(["bar","area","pie","line"]).show();break;case"mood":availableCharts(["bar","line","pie","geo"]).show()}}}};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var getRequest=function(t,e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=JSON.parse(a.responseText);e(t)}},a.open("GET",t),a.send()},getMySavedCharts=function(t){var e=t.chart,a=e.length;return{go:function(){getRequest("api/?/reports",function(t){var r;Object.assign(g.reports,t.reports);var s=function(){switch(!0){case a<5:return slot(90).createArray();case a>4&&a<7:return slot(130).createArray();case a>6&&a<11:return slot(210).createArray();default:return slot(300).createArray()}}();addSlotsToDOM(s).go(),(r=g.allSlots).push.apply(r,_toConsumableArray(s)),e.map(function(e,a,r){var s=chartDiv(e.cssclass).createDiv();s.setAttribute("data-id",e.ordernumber),s.setAttribute("data-chartid",e.id);var i=chartSize(s).getSize(),o=i.elWidth,n=i.elHeight,c=Number(e.ordernumber);g.chartPositions[a]={id:e.id,dataId:c,report:e.report,charttype:e.charttype,cssclass:e.cssclass,width:o,height:n,x:Number(e.x),y:Number(e.y),slotpositions:e.slot},g.staticChartAttributes[a]={report:e.report,charttype:e.charttype,cssclass:e.cssclass},console.log(e),console.log(g.staticChartAttributes),console.log(c);var l=chart(t.reports[e.report],"pie"===e.cssclass?"pie":"regular",e.charttype,s).getChart();addAttributesToChart(s,e,l),g.dataId.push(c),g.allCharts.push(l)});var i=e.map(function(t){return t.slotpositions}).reduce(function(t,e){return t.concat(e)},[]);g.slotObjects.filter(function(t){return i.some(function(e){return e.xPos===t.xPos&&e.yPos===t.yPos})}).map(function(t){var e=getSlotElem(t.xPos,t.yPos);t.status="occupied",e.dataset.status="occupied"})})}}};function addFirstCharts(){getRequest("api/?/charts",function(t){console.log(void 0!==t.chart&&t.chart.length>0),void 0!==t.chart&&t.chart.length>0?getMySavedCharts(t).go():getRequest("api/?/reports",function(t){var e;Object.assign(g.reports,t.reports);var a=slot(70).createArray();addSlotsToDOM(a).go(),(e=g.allSlots).push.apply(e,_toConsumableArray(a));var r=[chartDiv("area").createDiv(),chartDiv("geo").createDiv(),chartDiv("pie").createDiv()],s=[chart(t.reports.sale,"regular","AreaChart",r[0]).getChart(),chart(t.reports.nationalities,"regular","GeoChart",r[1]).getChart(),chart(t.reports.bookings,"pie","PieChart",r[2]).getChart()],i=["AreaChart","GeoChart","PieChart"],o=["sale","nationalities","bookings"],n=0;g.allSlots.forEach(function(t,e){if("occupied"!==g.slotObjects[e].status&&r[++n-1]&&s[n-1]&&i[n-1]&&o[n-1]){var a=chartSize(r[n-1]).getSize(),c=a.elWidth,l=a.elHeight;placeCharts({div:r[n-1],chart:s[n-1],type:i[n-1],report:o[n-1],indx:e,increment:n,width:c,height:l}).go()}})})})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function removeChart(){console.log(this.parentElement.dataset.id);var t=this.parentElement.dataset.id-1;g.dataId.splice(t,1),console.log(g.dataId)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}g.box.addEventListener("click",function(){dynamicTabBar.layout(),fixed_ripple.map(function(t){return t.layout()}),g.removeBox.style.display="block",this.classList.add("open"),g.pseudoCircle.classList.add("open"),g.menu1.classList.add("show"),g.overlay.classList.add("add"),g.toolbar.classList.add("open"),g.toolbar.classList.remove("fade-out")}),[g.overlay,g.removeBox].map(function(t){t.addEventListener("click",function(){g.removeBox.style.display="none",g.container2.classList.add("out-of-sight"),g.overlay.classList.remove("add"),document.querySelector('[data-selected="selected"]')&&document.querySelector('[data-selected="selected"]').removeAttribute("data-selected"),removeMenu()})}),[].concat(_toConsumableArray(document.querySelectorAll(".add-container-2"))).map(function(t){t.addEventListener("click",function(t){var e=this.id;g.container2.classList.remove("out-of-sight"),g.toolbar.classList.add("fade-out"),setTimeout(function(){g.container2.classList.add("shadow")},300),t.currentTarget.setAttribute("data-selected","selected"),showAvailableCharts(e).go()})}),[].concat(_toConsumableArray(document.querySelectorAll(".card2"))).forEach(function(t){t.addEventListener("click",function(){g.overlay.classList.remove("add");for(var t=g.slotObjects.length,e=0;e<20;e++){var a=slot().createDiv(e+t);g.allSlots.push(a),addSlotsToDOM(g.allSlots).go()}removeMenu(),addChartToDOM(this).go(),g.container2.classList.add("out-of-sight")})});var changeOnResize=function(t,e,a){var r={perRow:t,slotWidth:e,slotHeight:a};return Object.assign({},drawSlots(r),drawDivs(r),drawCharts(r))},drawSlots=function(t){return{slots:function(){g.allSlots.map(function(e,a,r){var s=g.aspectHeight/g.aspectWidth;e.setAttribute("style","width: "+100/t.perRow+"%; padding-bottom: "+100/t.perRow*round(s,1)+"%;"),e.dataset.status="available",g.slotObjects[a].status="available",g.slotObjects[a].xPos=Math.floor(a/t.perRow)+1,g.slotObjects[a].yPos=a%t.perRow+1,g.slotObjects[a].width=t.slotWidth,g.slotObjects[a].height=t.slotHeight,r[a].dataset.slotX=g.slotObjects[a].xPos,r[a].dataset.slotY=g.slotObjects[a].yPos}),setTimeout(function(){var t=g.wrap().getBoundingClientRect();[].concat(_toConsumableArray(document.getElementsByClassName("dd-slot"))).forEach(function(e,a){var r=e.getBoundingClientRect();g.slotObjects[a].y=r.top-t.top,g.slotObjects[a].x=r.left-t.left})},200)}}},drawDivs=function(t){return{divs:function(){var e=0;g.allSlots.map(function(a,r){if("occupied"!==g.slotObjects[r].status&&(e++,void 0!==g.dataId[e-1])){var s=g.dataId[e-1],i=document.querySelector('[data-id="'+s+'"]');if("1400px"===g.wrap().style.width)switch(!0){case i.classList.contains("area")||i.classList.contains("line"):i.setAttribute("style","width:"+3*t.slotWidth+"px; height:"+3*t.slotHeight+"px;");break;case i.classList.contains("geo")||i.classList.contains("bar"):i.setAttribute("style","width:"+4*t.slotWidth+"px; height:"+4*t.slotHeight+"px;");break;case i.classList.contains("pie"):i.setAttribute("style","width:"+3*t.slotWidth+"px; height:"+4*t.slotHeight+"px;")}if("700px"===g.wrap().style.width)switch(!0){case i.classList.contains("area")||i.classList.contains("line"):i.setAttribute("style","width:"+2*t.slotWidth+"px; height:"+2*t.slotHeight+"px;");break;case i.classList.contains("geo")||i.classList.contains("bar"):i.setAttribute("style","width:"+3*t.slotWidth+"px; height:"+3*t.slotHeight+"px;");break;case i.classList.contains("pie"):i.setAttribute("style","width:"+2*t.slotWidth+"px; height:"+3*t.slotHeight+"px;")}"300px"===g.wrap().style.width&&i.setAttribute("style","width:"+t.slotWidth+"px; height:"+t.slotHeight+"px;");var o=chartSize(i).getSize(),n=o.elWidth,c=o.elHeight,l=void 0,d=g.chartPositions[e-1].id;if(isNotOverlapping(r,n,c).check())l=getGridPositions(r,i).go(),i.style.transform="translate3d("+l.x+"px, "+l.y+"px,0px)",g.chartPositions[e-1]={id:d,dataId:Number(s),report:g.staticChartAttributes[e-1].report,charttype:g.staticChartAttributes[e-1].charttype,cssclass:g.staticChartAttributes[e-1].cssclass,width:l.width,height:l.height,x:l.x,y:l.y,slotpositions:l.slot};else{var h=availableIndex(n,c).get();l=getGridPositions(h,i).go(),i.style.transform="translate3d("+l.x+"px, "+l.y+"px,0px)",g.chartPositions[e-1]={id:d,dataId:Number(s),report:g.staticChartAttributes[e-1].report,charttype:g.staticChartAttributes[e-1].charttype,cssclass:g.staticChartAttributes[e-1].cssclass,width:l.width,height:l.height,x:l.x,y:l.y,slotpositions:l.slot}}}})}}},drawCharts=function(t){return{charts:function(){g.allCharts.map(function(t){return t.draw()})}}},resize=function(t,e,a){g.wrap(),changeOnResize(t,e,a).slots(),setTimeout(function(){changeOnResize(t,e,a).divs()},200),setTimeout(function(){changeOnResize().charts()},500)},sizerArray=[g.mini,g.medium,g.large];function chartMouseDown(t){g.selected||(g.wrap().addEventListener("mousemove",chartMouseMove),g.selected=t.currentTarget,g.originalClickCoords={x:t.pageX,y:t.pageY},g.originalIndex=getIndexOfChartId(g.selected.getAttribute("data-id")).go(),g.selected.classList.add("dd-selected"),console.log("g.originalIndex: "+g.originalIndex),g.selected.classList.remove("dd-transition"),g.slotObjects.map(function(t){return t.status="available"}),g.allSlots.map(function(t){return t.dataset.status="available"}))}function chartMouseMove(t){if(g.selected){var e=g.wrap().getBoundingClientRect(),a=e.left+document.documentElement.scrollLeft,r=e.top+document.documentElement.scrollTop,s=t.pageX,i=t.pageY,o=s-a,n=i-r,c=getChartIdByCoords({x:o,y:n}).go(),l=(getSlotIdByCoords({x:o,y:n}).go(),g.selected),d=l.getAttribute("data-id"),h=g.originalIndex,u=getIndexOfChartId(d).go(),p=g.chartPositions[h].x,m=g.chartPositions[h].y;l.childNodes[0].classList.add("shadow-elevated");var b=p+(s-g.originalClickCoords.x),y=m+(i-g.originalClickCoords.y);void 0!==c&&g.lastTouched!==c&&(g.lastTouched=c,g.dataId.splice(c,0,g.dataId.splice(u,1)[0]),g.staticChartAttributes.splice(c,0,g.staticChartAttributes.splice(u,1)[0]),arrangeItems().go()),l.style.transform="translate3d("+b+"px, "+y+"px, 0)"}}function chartMouseUp(){g.selected&&(g.selected.classList.remove("dd-selected"),g.selected.classList.add("dd-transition"),g.selected.childNodes[0].classList.remove("shadow-elevated"),g.selected=null,g.originalClickCoords=null,arrangeItemsMouseUp().go())}sizerArray.forEach(function(t,e,a){t.addListener(function(t){t.matches&&("screen and (max-width:400px)"!==t.media&&"screen and (max-width: 400px)"!==t.media||resize(1,300,180),t.media!==g.chromeMediaMedium&&t.media!==g.mozMediaMedium&&t.media!==g.msMediaMedium||resize(5,140,84),"screen and (min-width:1200px)"!==t.media&&"screen and (min-width: 1200px)"!==t.media||resize(10,140,84))})});